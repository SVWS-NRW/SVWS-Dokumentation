<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Required for Jenkins websocket agents | SVWS Dokumentation</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/assets/style.2759ba08.css">
    <link rel="modulepreload" href="/assets/plugin-vue_export-helper.68280688.js">
    <link rel="modulepreload" href="/assets/Home.95c605b2.js">
    <link rel="modulepreload" href="/assets/SVWS-Server-Installationen_IT-Umgebung_Installation_ReverseProxy-Server.md.7c8d3c36.lean.js">
    <link rel="modulepreload" href="/assets/app.7749d780.js">
    
    <meta name="twitter:title" content="Required for Jenkins websocket agents | SVWS Dokumentation">
  <meta property="og:title" content="Required for Jenkins websocket agents | SVWS Dokumentation">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="SVWS Dokumentation, back to home" data-v-675d8756 data-v-4a583abe><!----> SVWS Dokumentation</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><!----></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><!----><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Entwicklungsumgebungen</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/Eclipse-Ubuntu/">Eclipse-Ubuntu</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/Eclipse-Windows/">Eclipse-Windows</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/Eclipse-Windows_im_MSB/">Eclipse-Windows_im_MSB</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/Multipass/">Multipass</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/VS-Code/">VS-Code</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Entwicklungsumgebungen/macOS/">macOS</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Gitlab-Server/">Gitlab-Server</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Lizenz-Informationen/">Lizenz-Informationen</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Reporting/">Reporting</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-Client/">SVWS-Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-Installer/">SVWS-Installer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-Server/">SVWS-Server</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-Server/svws-db/">svws-db</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-Server-Installationen/">SVWS-Server-Installationen</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/SVWS-UI-Framework/">SVWS-UI-Framework</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>=Jenkins-Installation und Konfiguration=</p><hr><p><a href="https://linuxize.com/post/how-to-install-jenkins-on-debian-10/" target="_blank" rel="noopener noreferrer">https://linuxize.com/post/how-to-install-jenkins-on-debian-10/</a><a href="https://certbot.eff.org/lets-encrypt/otherpip-nginx" target="_blank" rel="noopener noreferrer">https://certbot.eff.org/lets-encrypt/otherpip-nginx</a><a href="https://zunni.medium.com/running-jenkins-over-ssl-tls-on-ubuntu-e70de750d92" target="_blank" rel="noopener noreferrer">https://zunni.medium.com/running-jenkins-over-ssl-tls-on-ubuntu-e70de750d92</a><a href="https://github.com/hughperkins/howto-jenkins-ssl/blob/master/letsencrypt.md" target="_blank" rel="noopener noreferrer">https://github.com/hughperkins/howto-jenkins-ssl/blob/master/letsencrypt.md</a></p><p>== Installation Nging== apt install ngninx systemclt start ngninx systemclt status ngninx systemclt enable ngninx</p><p>Successfully received certificate. Certificate is saved at: /etc/letsencrypt/live/svws-devops.de/fullchain.pem Key is saved at: /etc/letsencrypt/live/svws-devops.de/privkey.pem</p><p>etc/crontab: 0 2 * * * root /opt/certbot/bin/python -c &#39;import random; import time; time.sleep(random.random() * 36000)&#39; &amp;&amp; certbot renew -q 0 3 * * * root /usr/bin/openssl rsa -in /etc/letsencrypt/live/svws-devops.de/privkey.pem -out /etc/letsencrypt/live/svws-devops.de/privkey-rsa.pem 0 2 1 * * root /opt/certbot/bin/pip install --upgrade certbot certbot-nginx</p><p>Konfiguration des Jenkins Servers: /etc/default/jenkins</p><p>HTTP_HOST=127.0.0.1 JENKINS_ARGS=&quot;--webroot=/var/cache/$NAME/war --httpListenAddress=$HTTP_HOST --httpPort=$HTTP_PORT&quot; JAVA_ARGS=&quot;-Xmx32768m -Djava.awt.headless=true&quot;</p><hr><p>=Nginx Konfiguration=</p><p><a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html" target="_blank" rel="noopener noreferrer">https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</a><a href="https://www.scaleway.com/en/docs/how-to-configure-nginx-reverse-proxy/" target="_blank" rel="noopener noreferrer">https://www.scaleway.com/en/docs/how-to-configure-nginx-reverse-proxy/</a></p><p>etc/nginx/snippets</p><p>ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;; ssl_ecdh_curve secp384r1; ssl_session_cache shared:SSL:10m; ssl_session_tickets off; ssl_stapling on; ssl_stapling_verify on;</p><p>resolver 8.8.8.8 8.8.4.4 valid=300s; resolver_timeout 5s;</p><p>add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains&quot; always; add_header X-Frame-Options SAMEORIGIN; add_header X-Content-Type-Options nosniff;</p><p>ssl_dhparam /etc/ssl/certs/dhparam.pem;</p><p>openssl dhparam -out /etc/ssl/certs/dhparam.pem 4096</p><p>Nginx Konfiguartion: /etc/nginx/sites-available vim reverse *datei zur config des ReverseProxy</p><p>*** Inhalt der reverse *****</p><p>ln -s /etc/nginx/sites-available/reverse</p><p>/etc/nginx/sites-available# htpasswd /etc/nginx/.htpasswd pfotenhauer # beim ertsen mal mit -c für neue Datei</p><hr><p>server { listen 80 default_server; listen [::]:80 default_server;</p><pre><code>server_name artifactory.svws-devops.de svws-devops.de 195.90.212.161;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

return 301 https://$server_name$request_uri;
</code></pre><p>}</p><h1 id="required-for-jenkins-websocket-agents" tabindex="-1">Required for Jenkins websocket agents <a class="header-anchor" href="#required-for-jenkins-websocket-agents" aria-hidden="true">#</a></h1><p>map $http_upgrade $connection_upgrade { default upgrade; &#39;&#39; close; }</p><p>server { listen 443 ssl http2; listen [::]:433 ssl http2;</p><pre><code>server_name artifactory.svws-devops.de;

ssl_certificate /etc/letsencrypt/live/svws-devops.de/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/svws-devops.de/privkey.pem; # managed by Certbot
include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

auth_basic &quot;Restricted Dev-Ops-Artifactory-Server&quot;;
auth_basic_user_file /etc/nginx/.htpasswd;

# prevent information disclosure - change error return page
error_page 401 403 404 /404.html;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

# pass through headers from Jenkins that Nginx considers invalid
ignore_invalid_headers off;

location ^~ /.well-known/acme-challenge/ {
    auth_basic off;
    autoindex on;
}

location / {
    proxy_pass http://127.0.0.1:8082;

    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:443;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 443;
}
</code></pre><p>}</p><p>server { listen 443 ssl http2; listen [::]:443 ssl http2;</p><pre><code>server_name svws-devops.de 195.90.212.161;

ssl_certificate /etc/letsencrypt/live/svws-devops.de/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/svws-devops.de/privkey.pem; # managed by Certbot
include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

include /etc/nginx/snippets/strong-ssl.conf;

root /var/www/html;

auth_basic &quot;Restricted Dev-Ops-Server&quot;;
auth_basic_user_file /etc/nginx/.htpasswd;

# prevent information disclosure - change error return page
error_page 401 403 404 /404.html;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

# pass through headers from Jenkins that Nginx considers invalid
ignore_invalid_headers off;

location ^~ /.well-known/acme-challenge/ {
    auth_basic off;
    autoindex on;
}

location /github-webhook/ {
auth_basic off;

    proxy_pass http://127.0.0.1:8080;

    # Required for Jenkins websocket agents
    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:80;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 80;
}

location / {
    proxy_pass http://127.0.0.1:8080;

    # Required for Jenkins websocket agents
    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:443;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 443;
}
</code></pre><p>}</p><hr><p>server { listen 80 default_server; listen [::]:80 default_server;</p><pre><code>server_name artifactory.svws-devops.de svws-devops.de 195.90.212.161;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

return 301 https://$server_name$request_uri;
</code></pre><p>}</p><h1 id="required-for-jenkins-websocket-agents-1" tabindex="-1">Required for Jenkins websocket agents <a class="header-anchor" href="#required-for-jenkins-websocket-agents-1" aria-hidden="true">#</a></h1><p>map $http_upgrade $connection_upgrade { default upgrade; &#39;&#39; close; }</p><p>server { listen 443 ssl http2; listen [::]:433 ssl http2;</p><pre><code>server_name artifactory.svws-devops.de;

ssl_certificate /etc/letsencrypt/live/svws-devops.de/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/svws-devops.de/privkey.pem; # managed by Certbot
include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

auth_basic &quot;Restricted Dev-Ops-Artifactory-Server&quot;;
auth_basic_user_file /etc/nginx/.htpasswd;

# prevent information disclosure - change error return page
error_page 401 403 404 /404.html;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

# pass through headers from Jenkins that Nginx considers invalid
ignore_invalid_headers off;

location ^~ /.well-known/acme-challenge/ {
    auth_basic off;
    autoindex on;
}

location / {
    proxy_pass http://127.0.0.1:8082;

    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:443;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 443;
}
</code></pre><p>}</p><p>server { listen 443 ssl http2; listen [::]:443 ssl http2;</p><pre><code>server_name svws-devops.de 195.90.212.161;

ssl_certificate /etc/letsencrypt/live/svws-devops.de/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/svws-devops.de/privkey.pem; # managed by Certbot
include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

include /etc/nginx/snippets/strong-ssl.conf;

root /var/www/html;

auth_basic &quot;Restricted Dev-Ops-Server&quot;;
auth_basic_user_file /etc/nginx/.htpasswd;

# prevent information disclosure - change error return page
error_page 401 403 404 /404.html;

proxy_set_header X-Content-Type-Options nosniff;
proxy_set_header X-Frame-Options &quot;SAMEORIGIN&quot;;

# pass through headers from Jenkins that Nginx considers invalid
ignore_invalid_headers off;

location ^~ /.well-known/acme-challenge/ {
    auth_basic off;
    autoindex on;
}

location /github-webhook/ {
auth_basic off;

    proxy_pass http://127.0.0.1:8080;

    # Required for Jenkins websocket agents
    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:80;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 80;
}

location / {
    proxy_pass http://127.0.0.1:8080;

    # Required for Jenkins websocket agents
    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Upgrade $http_upgrade;

    proxy_set_header Host $host:443;
    proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Port 443;
}
</code></pre><p>}</p><hr></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"algorithmen_blockungs-algorithmus_blockungsalgorithmen.md\":\"750e485a\",\"algorithmen_gs_index.md\":\"f7fc9582\",\"entwicklungsumgebungen_eclipse-ubuntu_index.md\":\"9a2997d1\",\"entwicklungsumgebungen_eclipse-windows_index.md\":\"665f342c\",\"entwicklungsumgebungen_eclipse-windows_im_msb_index.md\":\"8808b28b\",\"entwicklungsumgebungen_intellij_index.md\":\"ea713a62\",\"entwicklungsumgebungen_multipass_index.md\":\"b928d8e0\",\"entwicklungsumgebungen_vs-code_index.md\":\"7bae4f16\",\"entwicklungsumgebungen_macos_index.md\":\"6b4e03c0\",\"entwicklungsumgebungen_übersicht_index.md\":\"578ffb2c\",\"faq.md\":\"c2122441\",\"gitlab-server_installation.md\":\"51f99452\",\"gitlab-server_workflow.md\":\"a980b2ed\",\"gitlab-server_index.md\":\"5d9dd5d4\",\"lizenz-informationen_index.md\":\"c6609a8f\",\"projektanforderungen.md\":\"1cc1494e\",\"reporting_index.md\":\"09653467\",\"svws-client_favicon.md\":\"3d012817\",\"svws-client_mitarbeit.md\":\"222a9d2f\",\"svws-client_notenmanager.md\":\"161f97a2\",\"svws-client_wenom.md\":\"151f8167\",\"svws-client_index.md\":\"d393954c\",\"svws-installer_index.md\":\"71d1249c\",\"svws-server-installationen_001_deployment.md\":\"b29438ad\",\"svws-server-installationen_002_installation_svws-server.md\":\"ec73b568\",\"svws-server-installationen_003_update_svws-server.md\":\"53af54e6\",\"svws-server-installationen_004_datenbank_schemata_einfügen.md\":\"1ce1554e\",\"svws-server-installationen_it-umgebung_einrichtung_portfreigabe.md\":\"d20475eb\",\"svws-server-installationen_it-umgebung_einrichtung_proxmox-container.md\":\"bb66d962\",\"svws-server-installationen_it-umgebung_installation_reverseproxy-server.md\":\"7c8d3c36\",\"svws-server-installationen_it-umgebung_installation_vpn-server.md\":\"c70544e5\",\"svws-server-installationen_index.md\":\"a5b6b730\",\"svws-server-installationen_scripts_install-svws-from-scratch.md\":\"67789963\",\"svws-server_index.md\":\"695e8a82\",\"svws-server_svws-base_readme.md\":\"6fd0e715\",\"svws-server_svws-base_schemacsvstatkue_schulver_einlesen.md\":\"f462637e\",\"svws-server_svws-base_schemacsvstatkue_statkue_datumswerte.md\":\"84b7cedc\",\"svws-server_svws-base_schemacsvstatkue_statkue_fachklassen.md\":\"301f257b\",\"svws-server_svws-core-ts_readme.md\":\"71e0be90\",\"svws-server_svws-core_readme.md\":\"f516ebd2\",\"svws-server_svws-db-utils_readme.md\":\"86b12d5c\",\"svws-server_svws-db_tabellenbeschreibung.md\":\"859fafc4\",\"svws-server_svws-db_index.md\":\"f6aebaf5\",\"svws-server_svws-openapi-ts_readme.md\":\"1f782ed6\",\"svws-server_svws-openapi_readme.md\":\"613d2243\",\"svws-server_svws-server-app_readme.md\":\"63e7e55a\",\"svws-server_svws-transpile_readme.md\":\"98867224\",\"svws-ui-framework_bedienkonzept.md\":\"28acd4bb\",\"svws-ui-framework_gui-auswahl.md\":\"e805c73b\",\"svws-ui-framework_styleguide.md\":\"29c7814b\",\"svws-ui-framework_index.md\":\"d4eebd1f\",\"teamordner_tagesordnung_2021_21_03.md\":\"57e27933\",\"index.md\":\"d40d7ea1\"}")</script>
    <script type="module" async src="/assets/app.7749d780.js"></script>
    
  </body>
</html>